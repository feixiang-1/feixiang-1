# url é‡Œå¡«å†™è‡ªå·±çš„è®¢é˜…,åç§°ä¸èƒ½é‡å¤
proxy-providers:
  private_nodes:
    url: "https://your-subscription-url/"
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300

# ç”¨äºä¸‹è½½è®¢é˜…æ—¶æŒ‡å®šUA
global-ua: clash

# å…¨å±€é…ç½®
mixed-port: 7890
ipv6: true
allow-lan: true
unified-delay: true
tcp-concurrent: true

geodata-mode: false
geodata-loader: standard
geo-auto-update: true
geo-update-interval: 48
geox-url:
  geoip: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  asn: "https://ghfast.top/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"

# æ§åˆ¶é¢æ¿
external-controller: 0.0.0.0:9090
secret: ""
external-ui: ui
external-ui-url: "https://ghfast.top/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"

global-client-fingerprint: random
keep-alive-idle: 600
keep-alive-interval: 30

# ç­–ç•¥ç»„é€‰æ‹©å’Œfakeipç¼“å­˜
profile:
  store-selected: true
  store-fake-ip: true

# æµé‡å—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - +.v2ex.com
  skip-domain:
    - "dlg.io.mi.com"
    - "+.push.apple.com"
    - "+.apple.com"

# ä»£ç†æ¨¡å¼
tun:
  enable: false
  stack: mixed
  mtu: 9000
  dns-hijack:
    - "any:53"
    - "tcp://any:53"
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

# DNSæ¨¡å—
dns:
  enable: true
  ipv6: true
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - "*"
    - "+.lan"
    - "+.local"
    - "+.market.xiaomi.com"
  fallback:
    - https://dns.cloudflare.com/dns-query
    - tls://dns.google:853
    - https://1.1.1.1/dns-query
  default-nameserver:
    - 223.5.5.5
    - 114.114.114.114
  nameserver:
    - 8.8.8.8
    - 1.1.1.1
    - 208.67.222.222
    - 208.67.220.220
  proxy-server-nameserver:
    - https://120.53.53.53/dns-query
    - https://223.5.5.5/dns-query
  nameserver-policy:
    "geosite:cn,private,apple":
      - 218.104.111.114
      - 218.106.127.114
      - https://120.53.53.53/dns-query
      - https://223.5.5.5/dns-query
    "geosite:geolocation-!cn":
      - "https://dns.cloudflare.com/dns-query"
      - "https://dns.google/dns-query"

proxies:
  - name: "ğŸŸ¢ ç›´è¿"
    type: direct
    udp: true

# é”šç‚¹
pr: &pr { type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, â™»ï¸ SGè‡ªåŠ¨, â™»ï¸ TWè‡ªåŠ¨, â™»ï¸ JPè‡ªåŠ¨, â™»ï¸ KRè‡ªåŠ¨, â™»ï¸ SAè‡ªåŠ¨, â™»ï¸ USè‡ªåŠ¨, â™»ï¸ EUè‡ªåŠ¨, â™»ï¸ CAè‡ªåŠ¨] }
pr1: &pr1 { type: url-test, proxies: [â™»ï¸ SGè‡ªåŠ¨, â™»ï¸ TWè‡ªåŠ¨, â™»ï¸ JPè‡ªåŠ¨, â™»ï¸ KRè‡ªåŠ¨, â™»ï¸ SAè‡ªåŠ¨, â™»ï¸ USè‡ªåŠ¨, â™»ï¸ EUè‡ªåŠ¨, â™»ï¸ CAè‡ªåŠ¨] }

# ç­–ç•¥ç»„
proxy-groups:
  - { name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [â™»ï¸ è‡ªåŠ¨é€‰æ‹©, â™»ï¸ SGè‡ªåŠ¨, â™»ï¸ TWè‡ªåŠ¨, â™»ï¸ JPè‡ªåŠ¨, â™»ï¸ KRè‡ªåŠ¨, â™»ï¸ SAè‡ªåŠ¨, â™»ï¸ HKè‡ªåŠ¨, â™»ï¸ USè‡ªåŠ¨, â™»ï¸ EUè‡ªåŠ¨, â™»ï¸ CAè‡ªåŠ¨, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, ğŸŸ¢ ç›´è¿] }
  - { name: ğŸ“¹ YouTube, !!merge <<: *pr }
  - { name: ğŸ€ Google, !!merge <<: *pr }
  - { name: ğŸ¤– ChatGPT, !!merge <<: *pr1 }
  - { name: ğŸ˜„ è‡ªå®šä¹‰è§„åˆ™, !!merge <<: *pr1 }
  - { name: ğŸ‘¨ğŸ¿â€ğŸ’» GitHub, !!merge <<: *pr }
  - { name: ğŸ¬ OneDrive, !!merge <<: *pr }
  - { name: ğŸªŸ Microsoft, !!merge <<: *pr }
  - { name: ğŸµ TikTok, !!merge <<: *pr }
  - { name: ğŸ“² Telegram, !!merge <<: *pr }
  - { name: ğŸ¥ NETFLIX, !!merge <<: *pr }
  - { name: âœˆï¸ Speedtest, !!merge <<: *pr }
  - { name: ğŸ’¶ PayPal, !!merge <<: *pr }
  - { name: ğŸ Apple, type: select, proxies: [ğŸŸ¢ ç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©] }
  - { name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [ğŸŸ¢ ç›´è¿, ğŸš€ èŠ‚ç‚¹é€‰æ‹©] }
  - { name: ğŸŸ æ¼ç½‘ä¹‹é±¼, !!merge <<: *pr }
  - { name: â™»ï¸ SAè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)ä¸œå—äºš|SEA|é©¬æ¥è¥¿äºš|Malaysia|MY|æ³°å›½|Thailand|TH|å°å°¼|Indonesia|ID|è²å¾‹å®¾|Philippines|PH|è¶Šå—|Vietnam|VN|æŸ¬åŸ”å¯¨|Cambodia|KH|ç¼…ç”¸|Myanmar|MM|è€æŒ|Laos|LA|æ–‡è±|Brunei|BN)" }
  - { name: â™»ï¸ EUè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)æ¬§æ´²|EU|United Kingdom|UK|è‹±å›½|France|FR|æ³•å›½|Germany|DE|å¾·å›½|Netherlands|NL|è·å…°|Italy|IT|æ„å¤§åˆ©|Spain|ES|è¥¿ç­ç‰™|Sweden|SE|ç‘å…¸|Denmark|DK|ä¸¹éº¦|Finland|FI|èŠ¬å…°|Norway|NO|æŒªå¨|Switzerland|CH|ç‘å£«|Austria|AT|å¥¥åœ°åˆ©|Belgium|BE|æ¯”åˆ©æ—¶|Poland|PL|æ³¢å…°|Ireland|IE|çˆ±å°”å…°)" }
  - { name: â™»ï¸ CAè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)åŠ æ‹¿å¤§|CA|Canada|æ¸©å“¥å|å¤šä¼¦å¤š|è’™ç‰¹åˆ©å°”|å¡å°”åŠ é‡Œ|æ¸¥å¤ªå|æ¸©å°¼ä¼¯|åŸƒå¾·è’™é¡¿|ç»´å¤šåˆ©äºš)" }
  - { name: â™»ï¸ HKè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)é¦™æ¸¯|æ¸¯|HK|Hong Kong|HongKong)" }
  - { name: â™»ï¸ SGè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)æ–°åŠ å¡|å¡|ç‹®åŸ|SG|Singapore)" }
  - { name: â™»ï¸ JPè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)æ—¥æœ¬|JP|Japan|ä¸œäº¬|å¤§é˜ª|åŒ—æµ·é“|åå¤å±‹|ç¦å†ˆ|äº¬éƒ½|å¹¿å²›|ç¥æˆ·|å†²ç»³|æ¨ªæ»¨|åŸ¼ç‰|å·æ—¥|æ³‰æ—¥|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥)" }
  - { name: â™»ï¸ USè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)ç¾å›½|US|United States|æ´›æ‰çŸ¶|æ—§é‡‘å±±|åœ£ä½•å¡|ç¡…è°·|åœ£å…‹æ‹‰æ‹‰|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|æ‹‰æ–¯ç»´åŠ æ–¯|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|è¿ˆé˜¿å¯†|åç››é¡¿|æ³¢å£«é¡¿|ä¼‘æ–¯é¡¿|åº•ç‰¹å¾‹|è´¹åŸ)" }
  - { name: â™»ï¸ TWè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)å°æ¹¾|å°|TW|Taiwan|å°åŒ—|æ–°åŒ—|é«˜é›„|å°ä¸­|å°å—|å½°åŒ–|å—æŠ•|æ¡ƒå›­)" }
  - { name: â™»ï¸ KRè‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "((?i)éŸ©å›½|éŸ©|éŸ“|KR|Korea|KOR|é¦–å°”|é‡œå±±|ä»å·|å¤§é‚±|å…‰å·|æ°´åŸ)" }
  - { name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(ç›´è¿)).)*$" }
  - { name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true }
rules:
  - RULE-SET,private_ip,ğŸŸ¢ ç›´è¿,no-resolve
  - RULE-SET,private_domain,ğŸŸ¢ ç›´è¿
  - RULE-SET,apple_domain,ğŸ Apple
  - RULE-SET,ProxyGFWlist,ğŸ˜„ è‡ªå®šä¹‰è§„åˆ™
  - RULE-SET,proxylite,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai,ğŸ¤– ChatGPT
  - RULE-SET,github_domain,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,google_domain,ğŸ€ Google
  - RULE-SET,onedrive_domain,ğŸ¬ OneDrive
  - RULE-SET,microsoft_domain,ğŸªŸ Microsoft
  - RULE-SET,tiktok_domain,ğŸµ TikTok
  - RULE-SET,speedtest_domain,âœˆï¸ Speedtest
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,paypal_domain,ğŸ’¶ PayPal
  - RULE-SET,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,cn_domain,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,google_ip,ğŸ€ Google,no-resolve
  - RULE-SET,netflix_ip,ğŸ¥ NETFLIX,no-resolve
  - RULE-SET,telegram_ip,ğŸ“² Telegram,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ å…¨çƒç›´è¿,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
rule-anchor:
  ip: &ip { type: http, interval: 86400, behavior: ipcidr, format: mrs }
  domain: &domain { type: http, interval: 86400, behavior: domain, format: mrs }
  qcy: &qcy { type: http, interval: 86400, behavior: domain, format: text }
  class: &class { type: http, interval: 86400, behavior: classical, format: text }
rule-providers:


  private_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs" }
  
  proxylite: { !!merge <<: *class, url: "https://ghfast.top/https://raw.githubusercontent.com/qichiyuhub/rule/refs/heads/master/ProxyLite.list" }
  ai: { !!merge <<: *class, url: "https://ghfast.top/https://raw.githubusercontent.com/qichiyuhub/rule/refs/heads/master/AI.list" }
  ProxyGFWlist: { !!merge <<: *class, url: "https://ghfast.top/https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/refs/heads/master/Clash/ProxyGFWlist.list" }

  youtube_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs" }
  google_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs" }
  github_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs" }
  telegram_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs" }
  netflix_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs" }
  paypal_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.mrs" }
  onedrive_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs" }
  microsoft_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs" }
  apple_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs" }
  speedtest_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs" }
  tiktok_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs" }
  gfw_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs" }
  geolocation-!cn: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs" }
  cn_domain: { !!merge <<: *domain, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs" }

  cn_ip: { !!merge <<: *ip, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs" }
  google_ip: { !!merge <<: *ip, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs" }
  telegram_ip: { !!merge <<: *ip, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs" }
  netflix_ip: { !!merge <<: *ip, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs" }
  private_ip: { !!merge <<: *ip, url: "https://ghfast.top/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs" }
